import e from"@chriscdn/promise-semaphore";import r from"quick-lru";const t=(e,t={})=>{var n,a;const s=null!=(n=t.maxSize)?n:1e3,i=null!=(a=t.resolver)?a:(...e)=>JSON.stringify(e),c=new r({maxAge:t.maxAge,maxSize:s}),o=(...r)=>{const t=i(...r);if(c.has(t))return c.get(t);{const n=e(...r);return c.set(t,n),n}};return o.cache=c,o},n=(t,n={})=>{var a,s;const i=n.maxAge,c=null!=(a=n.maxSize)?a:1e3,o=null!=(s=n.resolver)?s:(...e)=>JSON.stringify(e),l=new e,m=new r({maxAge:i,maxSize:c}),u=async(...e)=>{const r=o(...e);if(m.has(r))return m.get(r);try{if(await l.acquire(r),m.has(r))return m.get(r);{const n=await t(...e);return m.set(r,n),n}}finally{l.release(r)}};return u.cache=m,u};export{t as Memoize,n as MemoizeAsync};
//# sourceMappingURL=memoize.modern.js.map
