import e from"@chriscdn/promise-semaphore";import r from"quick-lru";const t=(e,t={})=>{var n,a;const s=null!=(n=t.maxSize)?n:1e3,i=null!=(a=t.resolver)?a:(...e)=>JSON.stringify(e),o=new r({maxAge:t.maxAge,maxSize:s});return(...r)=>{const t=i(...r);if(o.has(t))return o.get(t);{const n=e(...r);return o.set(t,n),n}}},n=(t,n={})=>{var a,s;const i=n.maxAge,o=null!=(a=n.maxSize)?a:1e3,l=null!=(s=n.resolver)?s:(...e)=>JSON.stringify(e),m=new e,u=new r({maxAge:i,maxSize:o});return async(...e)=>{const r=l(...e);if(u.has(r))return u.get(r);try{if(await m.acquire(r),u.has(r))return u.get(r);{const n=await t(...e);return u.set(r,n),n}}finally{m.release(r)}}};export{t as Memoize,n as MemoizeAsync};
//# sourceMappingURL=memoize.modern.js.map
