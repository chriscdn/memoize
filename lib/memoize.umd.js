!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@chriscdn/promise-semaphore"),require("quick-lru")):"function"==typeof define&&define.amd?define(["exports","@chriscdn/promise-semaphore","quick-lru"],r):r((e||self).memoize={},e.Semaphore,e.quickLru)}(this,function(e,r,n){function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=/*#__PURE__*/i(r),o=/*#__PURE__*/i(n);e.Memoize=function(e,r){var n,i;void 0===r&&(r={});var t=null!=(n=r.maxSize)?n:1e3,u=null!=(i=r.resolver)?i:function(){return JSON.stringify([].slice.call(arguments))},l=new o.default({maxAge:r.maxAge,maxSize:t});return function(){var r=[].slice.call(arguments),n=u.apply(void 0,r);if(l.has(n))return l.get(n);var i=e.apply(void 0,r);return l.set(n,i),i}},e.MemoizeAsync=function(e,r){var n,i;void 0===r&&(r={});var u=r.maxAge,l=null!=(n=r.maxSize)?n:1e3,a=null!=(i=r.resolver)?i:function(){return JSON.stringify([].slice.call(arguments))},c=new t.default,s=new o.default({maxAge:u,maxSize:l});return function(){try{var r=[].slice.call(arguments),n=a.apply(void 0,r);return Promise.resolve(s.has(n)?s.get(n):function(i,t){try{var o=Promise.resolve(c.acquire(n)).then(function(){return s.has(n)?s.get(n):Promise.resolve(e.apply(void 0,r)).then(function(e){return s.set(n,e),e})})}catch(e){return t(!0,e)}return o&&o.then?o.then(t.bind(null,!1),t.bind(null,!0)):t(!1,o)}(0,function(e,r){if(c.release(n),e)throw r;return r}))}catch(e){return Promise.reject(e)}}}});
//# sourceMappingURL=memoize.umd.js.map
