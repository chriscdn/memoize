!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("lru-cache"),require("@chriscdn/promise-semaphore")):"function"==typeof define&&define.amd?define(["exports","lru-cache","@chriscdn/promise-semaphore"],r):r((e||self).memoize={},e.lruCache,e.Semaphore)}(this,function(e,r,n){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=/*#__PURE__*/t(n);e.Memoize=function(e,n){var t;void 0===n&&(n={});var i=null!=(t=n.max)?t:1e3,o=function(){return JSON.stringify([].slice.call(arguments))},l=new r.LRUCache({ttl:n.ttl,max:i});return function(){var r=[].slice.call(arguments),n=o.apply(void 0,r);if(l.has(n))return l.get(n);var t=e.apply(void 0,r);return l.set(n,t),t}},e.MemoizeAsync=function(e,n){var t;void 0===n&&(n={});var o=n.ttl,l=null!=(t=n.max)?t:1e3,u=function(){return JSON.stringify([].slice.call(arguments))},a=new i.default,c=new r.LRUCache({ttl:o,max:l});return function(){try{var r=[].slice.call(arguments),n=u.apply(void 0,r);return Promise.resolve(c.has(n)?c.get(n):function(t,i){try{var o=Promise.resolve(a.acquire(n)).then(function(){return c.has(n)?c.get(n):Promise.resolve(e.apply(void 0,r)).then(function(e){return c.set(n,e),e})})}catch(e){return i(!0,e)}return o&&o.then?o.then(i.bind(null,!1),i.bind(null,!0)):i(!1,o)}(0,function(e,r){if(a.release(n),e)throw r;return r}))}catch(e){return Promise.reject(e)}}}});
//# sourceMappingURL=memoize.umd.js.map
