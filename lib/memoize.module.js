import e from"@chriscdn/promise-semaphore";import r from"quick-lru";var n=function(e,n){var t,i;void 0===n&&(n={});var l=null!=(t=n.maxSize)?t:1e3,a=null!=(i=n.resolver)?i:function(){return JSON.stringify([].slice.call(arguments))},o=new r({maxAge:n.maxAge,maxSize:l});return function(){var r=[].slice.call(arguments),n=a.apply(void 0,r);if(o.has(n))return o.get(n);var t=e.apply(void 0,r);return o.set(n,t),t}},t=function(n,t){var i,l;void 0===t&&(t={});var a=t.maxAge,o=null!=(i=t.maxSize)?i:1e3,u=null!=(l=t.resolver)?l:function(){return JSON.stringify([].slice.call(arguments))},c=new e,s=new r({maxAge:a,maxSize:o});return function(){try{var e=[].slice.call(arguments),r=u.apply(void 0,e);return Promise.resolve(s.has(r)?s.get(r):function(t,i){try{var l=Promise.resolve(c.acquire(r)).then(function(){return s.has(r)?s.get(r):Promise.resolve(n.apply(void 0,e)).then(function(e){return s.set(r,e),e})})}catch(e){return i(!0,e)}return l&&l.then?l.then(i.bind(null,!1),i.bind(null,!0)):i(!1,l)}(0,function(e,n){if(c.release(r),e)throw n;return n}))}catch(e){return Promise.reject(e)}}};export{n as Memoize,t as MemoizeAsync};
//# sourceMappingURL=memoize.module.js.map
