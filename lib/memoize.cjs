var e=require("lru-cache");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=/*#__PURE__*/r(require("@chriscdn/promise-semaphore"));exports.Memoize=function(r,t){var n,l;void 0===t&&(t={});var i=null!=(n=t.max)?n:1e3,u=null!=(l=t.resolver)?l:function(){return JSON.stringify([].slice.call(arguments))},a=new e.LRUCache({ttl:t.ttl,max:i});return function(){var e=[].slice.call(arguments),t=u.apply(void 0,e);if(a.has(t))return a.get(t);var n=r.apply(void 0,e);return a.set(t,n),n}},exports.MemoizeAsync=function(r,n){var l,i;void 0===n&&(n={});var u=n.ttl,a=null!=(l=n.max)?l:1e3,o=null!=(i=n.resolver)?i:function(){return JSON.stringify([].slice.call(arguments))},c=new t.default,s=new e.LRUCache({ttl:u,max:a});return function(){try{var e=[].slice.call(arguments),t=o.apply(void 0,e);return Promise.resolve(s.has(t)?s.get(t):function(n,l){try{var i=Promise.resolve(c.acquire(t)).then(function(){return s.has(t)?s.get(t):Promise.resolve(r.apply(void 0,e)).then(function(e){return s.set(t,e),e})})}catch(e){return l(!0,e)}return i&&i.then?i.then(l.bind(null,!1),l.bind(null,!0)):l(!1,i)}(0,function(e,r){if(c.release(t),e)throw r;return r}))}catch(e){return Promise.reject(e)}}};
//# sourceMappingURL=memoize.cjs.map
